<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Translator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    padding: 2rem;
  }
  h1 {
    text-align: center;
  }
  textarea {
    width: 100%;
    padding: 0.8rem;
    font-size: 1rem;
    margin-bottom: 0.5rem;
    border-radius: 5px;
    border: 1px solid #ccc;
    resize: vertical;
  }
  button, select {
    padding: 0.8rem;
    font-size: 1rem;
    margin: 0.5rem 0;
    border-radius: 5px;
    cursor: pointer;
  }
  button {
    background-color: #007bff;
    color: white;
    border: none;
  }
  button:hover {
    background-color: #0056b3;
  }
  pre {
    background: #fff;
    padding: 1rem;
    border-radius: 5px;
    white-space: pre-wrap;
  }
  .row {
    display: flex;
    gap: 0.5rem;
  }
</style>
</head>
<body>

<h1>Mini Translator (EN ‚Üî VI)</h1>

<textarea id="inputText" rows="5" placeholder="Nh·∫≠p vƒÉn b·∫£n...">Hello, how are you?</textarea>

<div class="row">
  <select id="sourceLang">
    <option value="en">English</option>
    <option value="vi">Ti·∫øng Vi·ªát</option>
  </select>
  <button onclick="switchLang()">üîÑ Switch</button>
</div>

<button onclick="translateText()">D·ªãch ngay</button>

<h2>K·∫øt qu·∫£:</h2>
<pre id="outputText"></pre>

<script>
const API_KEY = "AIzaSyDiT4Um_axMoRkmpKLe9w-CRAtJkoki5uk";
const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";

function switchLang() {
  const select = document.getElementById("sourceLang");
  select.value = select.value === "en" ? "vi" : "en";
}

async function translateText() {
  const inputText = document.getElementById("inputText").value.trim();
  const sourceLang = document.getElementById("sourceLang").value;
  const targetLang = sourceLang === "en" ? "vi" : "en";
  const output = document.getElementById("outputText");

  if (!inputText) {
    output.textContent = "Vui l√≤ng nh·∫≠p vƒÉn b·∫£n.";
    return;
  }

  output.textContent = "ƒêang d·ªãch...";

  // Prompt m·∫∑c ƒë·ªãnh
  const prompt = `D·ªãch vƒÉn b·∫£n sau sang ${targetLang === 'en' ? 'English' : 'Ti·∫øng Vi·ªát'}: "${inputText}"`;

  try {
    const response = await fetch(`${API_URL}?key=${API_KEY}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }]
      })
    });

    const data = await response.json();
    if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content[0].text) {
      output.textContent = data.candidates[0].content[0].text;
    } else {
      output.textContent = "Kh√¥ng nh·∫≠n ƒë∆∞·ª£c k·∫øt qu·∫£ ho·∫∑c l·ªói API.\n" + JSON.stringify(data, null, 2);
    }
  } catch (err) {
    output.textContent = "L·ªói: " + err;
  }
}
</script>

</body>
</html>
